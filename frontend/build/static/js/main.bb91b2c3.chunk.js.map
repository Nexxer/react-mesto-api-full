{"version":3,"sources":["utils/api.js","utils/apiLogin.js","contexts/CurrentUserContext.js","utils/routesMap.js","image/logo.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","image/SucReg.svg","image/FailReg.svg","components/InfoTooltip.js","components/NotFound.js","components/App.js","serviceWorker.js","index.js"],"names":["api","baseUrl","headers","this","url","fetch","authorization","then","res","_getResponseData","info","method","body","JSON","stringify","name","about","avatar","card","link","cardId","isLiked","ok","json","Promise","reject","Error","status","localStorage","getItem","CurrentUserContext","React","createContext","ROUTES_MAP","Header","userMail","onSignOut","history","useHistory","className","to","src","logo","alt","path","exact","onClick","removeItem","push","Card","props","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","likes","some","i","cardLikeButtonClassName","Provider","value","onCardClick","onCardDelete","type","onCardLike","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","map","key","Footer","ImagePopup","isOpen","onClose","PopupWithForm","title","id","noValidate","onSubmit","children","buttonText","EditProfilePopup","useState","setName","description","setDescription","useEffect","evt","preventDefault","onUpdateUser","placeholder","required","minLength","maxLength","onChange","target","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","reset","ref","AddPlacePopup","setLink","Login","email","setEmail","password","setPassword","console","error","onLogin","Register","onRegister","ProtectedRoute","Component","component","loggedIn","InfoTooltip","Success","Failed","NotFound","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isCardPopupOpen","setIsCardPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","isRegisterPopupOpen","setIsRegisterPopupOpen","setUserMail","statusReg","setStatusReg","checkToken","jwt","Authorization","getJWT","data","catch","closeAllPopups","document","addEventListener","all","getUserInfo","getInitialCards","values","err","log","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","registration","token","setItem","message","setNewAvatar","setUserInfo","postNewCard","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.bb91b2c3.chunk.js","sourcesContent":["class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this.url = baseUrl;\r\n    this.headers = headers;\r\n  };\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this.url}/cards`, {\r\n      headers: {\r\n        authorization: this.headers.authorization,\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this.url}/users/me`, {\r\n      headers: {\r\n        authorization: this.headers.authorization,\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  setUserInfo(info) {\r\n    return fetch(`${this.url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: info.name,\r\n        about: info.about,\r\n      }),\r\n    })\r\n      .then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  setNewAvatar(avatar) {\r\n    return fetch(`${this.url}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  postNewCard(card) {\r\n    return fetch(`${this.url}/cards`, {\r\n      method: \"POST\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: card.name,\r\n        link: card.link,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this.url}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this.headers.authorization,\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    return fetch(`${this.url}/cards/likes/${cardId}`, {\r\n      method: (isLiked ? \"PUT\" : \"DELETE\"),\r\n      headers: {\r\n        authorization: this.headers.authorization,\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  _getResponseData(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n  };\r\n};\r\n\r\n// export const api = new Api({\r\n//   baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\r\n//   headers: {\r\n//     authorization: '834b1617-1b88-4942-8049-fea5a8e726ef',\r\n//     'Content-Type': 'application/json'\r\n//   }\r\n// });\r\n\r\n\r\nexport const api = new Api({\r\n  baseUrl: 'https://www.api.nekker.students.nomoreparties.co',\r\n  headers: {\r\n    authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n    'Content-Type': 'application/json',\r\n  }\r\n});\r\n","const baseUrl = 'https://www.api.nekker.students.nomoreparties.co';\r\n\r\nexport const registration = (email, password) => {\r\n  return fetch(`${baseUrl}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(res.status)\r\n    })\r\n};\r\n\r\nexport const onLogin = (email, password) => {\r\n  return fetch(`${baseUrl}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(res.status)\r\n    })\r\n};\r\n\r\nexport const getJWT = (jwt) => {\r\n  return fetch(`${baseUrl}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${jwt}`,\r\n    },\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(res.status)\r\n    })\r\n};\r\n","import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext;","export const ROUTES_MAP = {\r\n  MAIN: '/',\r\n  SIGN_UP: '/signup',\r\n  SIGN_IN: '/signin',\r\n  NOT_FOUND: '/404'\r\n};\r\n","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import React from 'react';\r\nimport logo from '../image/logo.svg';\r\nimport { Route, useHistory, Link } from 'react-router-dom';\r\nimport { ROUTES_MAP } from '../utils/routesMap';\r\n\r\nfunction Header({ userMail, onSignOut }) {\r\n  const history = useHistory();\r\n\r\n  const exit = () => {\r\n    onSignOut();\r\n    localStorage.removeItem(\"jwt\");\r\n    history.push(\"/signin\");\r\n  };\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <Link to={ROUTES_MAP.MAIN}>\r\n        <img className=\"header__logo\" src={logo} alt=\"Логотип\" />\r\n      </Link>\r\n\r\n      <Route path={ROUTES_MAP.MAIN} exact>\r\n        <div className=\"header__user\">\r\n          <p className=\"header__user-mail\">{userMail}</p>\r\n          <Link className=\"header__link\" to={ROUTES_MAP.SIGN_IN} onClick={exit}>\r\n            Выйти\r\n        </Link>\r\n        </div>\r\n      </Route>\r\n\r\n      <Route path={ROUTES_MAP.SIGN_UP}>\r\n        <Link className=\"header__link\" to={ROUTES_MAP.SIGN_IN}>\r\n          Войти\r\n        </Link>\r\n      </Route>\r\n\r\n      <Route path={ROUTES_MAP.SIGN_IN}>\r\n        <Link className=\"header__link\" to={ROUTES_MAP.SIGN_UP}>\r\n          Регистрация\r\n        </Link>\r\n      </Route>\r\n\r\n      <Route path={ROUTES_MAP.NOT_FOUND}>\r\n        <Link className=\"header__link\" to={ROUTES_MAP.MAIN}>\r\n          На главную\r\n        </Link>\r\n      </Route>\r\n\r\n    </header >\r\n  )\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport CurrentUserContext from './../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = (`element__delete ${isOwn ? '' : 'element__delete element__delete_hide'}`);\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = (`element__like ${isLiked ? 'elememt__like_active' : ''}`);\r\n\r\n  function handleClick() { props.onCardClick(props.card); }\r\n  function handleLikeClick() { props.onCardLike(props.card); }\r\n  function handleDeleteCard() { props.onCardDelete(props.card); }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <li className=\"element\">\r\n        <img\r\n          className=\"element__image\"\r\n          src={props.card.link}\r\n          alt={props.card.name}\r\n          onClick={handleClick}\r\n        />\r\n        <button\r\n          className={cardDeleteButtonClassName}\r\n          onClick={handleDeleteCard}\r\n        />\r\n        <div className=\"element__info\">\r\n          <h2 className=\"element__title\">{props.card.name}</h2>\r\n          <div className=\"element__likes-container\">\r\n            <button\r\n              type=\"button\"\r\n              className={cardLikeButtonClassName}\r\n              onClick={handleLikeClick}\r\n            />\r\n            <p className=\"element__likes\">{props.card.likes.length}</p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </CurrentUserContext.Provider >\r\n  )\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport CurrentUserContext from './../contexts/CurrentUserContext';\r\n\r\nfunction Main({ onEditAvatar, onEditProfile, onAddPlace, onCardClick, cards, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      {/* Профиль */}\r\n      <section className=\"profile\">\r\n        <div className=\"profile__img\">\r\n          <span className=\"profile__overlay\" onClick={onEditAvatar} />\r\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__title-row\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button className=\"profile__button-edit\" onClick={onEditProfile} />\r\n          </div>\r\n          <p className=\"profile__profession\">{currentUser.about}</p>\r\n        </div>\r\n        <button className=\"profile__button-add\" onClick={onAddPlace} />\r\n      </section>\r\n      {/* Места */}\r\n      <section className=\"elements\">\r\n        <ul className=\"elements__list\">\r\n\r\n          {cards.map((card) => {\r\n            return (\r\n              <Card\r\n                card={card}\r\n                onCardClick={onCardClick}\r\n                key={card._id}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete}\r\n              />\r\n            )\r\n          })}\r\n\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  )\r\n};\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\" >\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer >\r\n  )\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react'\r\n\r\nfunction ImagePopup({card, isOpen, onClose}) {\r\n   return (\r\n    <div className={`popup popup_type_photo ${isOpen && `popup_opened`}`}>\r\n      <figure className=\"popup__content\">\r\n        <img className=\"popup__image\" src={card.link} alt=\"Фото места\" />\r\n        <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n        <button className=\"popup__button-close popup__button-close_for_img\" onClick={onClose} />\r\n      </figure>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default ImagePopup;\r\n","import React from 'react';\r\n\r\n\r\nfunction PopupWithForm(props) {\r\n\r\n  return (\r\n    <div className={`popup popup_type_${props.name} ${props.isOpen && `popup_opened`}`}>\r\n      <div className=\"popup__container\">\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form\r\n          id={`form-${props.name}`}\r\n          className=\"popup__form\"\r\n          noValidate\r\n          onSubmit={props.onSubmit}\r\n        >\r\n          {props.children}\r\n          <button\r\n            type=\"submit\"\r\n            className=\"popup__button-save\"\r\n  >{props.buttonText}</button>\r\n        </form>\r\n        <button\r\n          className=\"popup__button-close\"\r\n          onClick={props.onClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default PopupWithForm;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport CurrentUserContext from './../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, props.isOpen])\r\n\r\n  function handleNameChange(evt) { setName(evt.target.value); }\r\n  function handlDescriptionChange(evt) { setDescription(evt.target.value); }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={props.buttonText}\r\n    >\r\n      <input\r\n        id=\"profile-name\"\r\n        type=\"text\"\r\n        name=\"name\"\r\n        className=\"popup__input\"\r\n        placeholder=\"Имя\"\r\n        required\r\n        minLength={2}\r\n        maxLength={40}\r\n        value={name || ''}\r\n        onChange={handleNameChange}\r\n      />\r\n\r\n      <span id=\"profile-name-error\" className=\"popup__input_error\" />\r\n\r\n      <input\r\n        id=\"profile-profession\"\r\n        type=\"text\"\r\n        name=\"about\"\r\n        className=\"popup__input popup__input_compl\"\r\n        placeholder=\"О себе\"\r\n        required\r\n        minLength={2}\r\n        maxLength={200}\r\n        value={description || ''}\r\n        onChange={handlDescriptionChange}\r\n      />\r\n\r\n      <span id=\"profile-profession-error\" className=\"popup__input_error\" />\r\n    </PopupWithForm>\r\n  )\r\n};\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    props.onUpdateAvatar(avatarRef.current.value);\r\n    evt.target.reset();\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar\"\r\n      title=\"Обновить аватар\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={props.buttonText}\r\n    >\r\n      <input\r\n        id=\"avatar-link\"\r\n        type=\"url\"\r\n        name=\"avatar\"\r\n        className=\"popup__input\"\r\n        placeholder=\"Ссылка на аватарку\"\r\n        required\r\n        ref={avatarRef}\r\n      />\r\n      <span id=\"avatar-link-error\" className=\"popup__input_error\" />\r\n    </PopupWithForm>\r\n  )\r\n};\r\n\r\nexport default EditAvatarPopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [name, setName] = React.useState(\"\");\r\n  const [link, setLink] = React.useState(\"\");\r\n\r\n  const handleNameChange = (evt) => {\r\n    setName(evt.target.value);\r\n  };\r\n  const handleLinkChange = (evt) => {\r\n    setLink(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    props.onAddPlace({\r\n      name: name,\r\n      link: link,\r\n    });\r\n    setName('');\r\n    setLink('');\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add-place\"\r\n      title=\"Новое место\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={props.buttonText}\r\n    >\r\n      <input\r\n        id=\"place-name\"\r\n        type=\"text\"\r\n        name=\"photoname\"\r\n        className=\"popup__input\"\r\n        placeholder=\"Название\"\r\n        required\r\n        minLength={2} maxLength={30}\r\n        value={name}\r\n        onChange={handleNameChange}\r\n      />\r\n      <span id=\"place-name-error\" className=\"popup__input_error\" />\r\n      <input\r\n        id=\"place-link\"\r\n        type=\"url\"\r\n        name=\"photolink\"\r\n        className=\"popup__input popup__input_compl\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n        value={link}\r\n        onChange={handleLinkChange}\r\n      />\r\n      <span id=\"place-link-error\" className=\"popup__input_error\" />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  const handleEmailChange = (evt) => {\r\n    setEmail(evt.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (evt) => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    if (!email || !password) {\r\n      console.error(\"Введите данные\");\r\n    }\r\n    props.onLogin(email, password);\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <h2 className=\"login__title\">Вход</h2>\r\n      <form\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"email\"\r\n          required={true}\r\n          placeholder=\"Email\"\r\n          onChange={handleEmailChange}\r\n        />\r\n\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"password\"\r\n          required={true}\r\n          placeholder=\"Пароль\"\r\n          onChange={handlePasswordChange}\r\n        />\r\n\r\n        <button type=\"submit\" className=\"login__submit-button\">\r\n          Войти\r\n      </button>\r\n      </form>\r\n    </div>\r\n\r\n  )\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { ROUTES_MAP } from '../utils/routesMap';\r\n\r\nfunction Register(props) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  const handleEmailChange = (evt) => {\r\n    setEmail(evt.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (evt) => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    if (!email || !password) {\r\n      console.error(\"Введите данные\");\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n    }\r\n    props.onRegister(email, password);\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <h2 className=\"login__title\">Регистрация</h2>\r\n      <form\r\n        className=\"login__form\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"email\"\r\n          required={true}\r\n          placeholder=\"Email\"\r\n          onChange={handleEmailChange}\r\n\r\n        />\r\n        <div className=\"login__input-box\">\r\n          <input\r\n            className=\"login__input\"\r\n            type=\"password\"\r\n            required={true}\r\n            placeholder=\"Пароль\"\r\n            onChange={handlePasswordChange}\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"login__submit-button\">\r\n          Зарегистрироваться\r\n      </button>\r\n      </form>\r\n\r\n      <Link className=\"login__link\" to={ROUTES_MAP.SIGN_IN}>\r\n        <p className=\"login__link_text\">Уже зарегистрированы? Войти</p>\r\n      </Link>\r\n\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { ROUTES_MAP } from '../utils/routesMap';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to={ROUTES_MAP.SIGN_IN} />\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","export default __webpack_public_path__ + \"static/media/SucReg.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/FailReg.df8eddf6.svg\";","import React from 'react';\r\nimport Success from '../image/SucReg.svg';\r\nimport Failed from './../image/FailReg.svg';\r\n\r\nfunction InfoTooltip({ isOpen, onClose, status }) {\r\n  return (\r\n    <div className={`popup popup_tooltip ${isOpen ? 'popup_opened' : ''}`}>\r\n      <div className='popup__container'>\r\n        <img\r\n          alt='результат'\r\n          className='popup__picture'\r\n          src={status ? Success : Failed}\r\n        />\r\n        <h2 className='popup__title popup__title_tooltip'>\r\n          {status ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\r\n        </h2>\r\n        <button\r\n          type='button'\r\n          className='popup__button-close'\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InfoTooltip;\r\n","import React from 'react';\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <div className=\"not-found\">\r\n      <h2 className=\"not-found__title\">404</h2>\r\n      <p className=\"not-found__text\">Страница не найдена</p>\r\n      <p className=\"not-found__text\">То что вы ищите, не существует</p>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default NotFound;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\nimport { api } from '../utils/api';\r\nimport { getJWT, onLogin, registration } from \"./../utils/apiLogin\";\r\nimport CurrentUserContext from './../contexts/CurrentUserContext';\r\nimport { ROUTES_MAP } from '../utils/routesMap';\r\nimport Header from './Header'\r\nimport Main from './Main'\r\nimport Footer from './Footer'\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport Login from './Login';\r\nimport Register from \"./Register\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport NotFound from \"./NotFound\";\r\n\r\nfunction App() {\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isCardPopupOpen, setIsCardPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [isRegisterPopupOpen, setIsRegisterPopupOpen] = useState(false);\r\n  const [userMail, setUserMail] = useState('');\r\n  const [statusReg, setStatusReg] = useState(false)\r\n\r\n  const history = useHistory();\r\n\r\n  const checkToken = () => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      getJWT(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setLoggedIn(true);\r\n            setUserMail(res.data.email);\r\n            history.push(\"/\");\r\n          } else {\r\n            setLoggedIn(false);\r\n            history.push(\"/signin\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  function handleLogout() {\r\n    setLoggedIn(false);\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка лайка. ${err}`);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c._id !== card._id);\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка удаления карточки. ${err}`);\r\n      });\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setIsCardPopupOpen(true);\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsRegisterPopupOpen(false);\r\n    setIsCardPopupOpen(false);\r\n  }\r\n\r\n  function handleUpdateUser(info) {\r\n    api\r\n      .setUserInfo(info)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка обновления данных пользователя. ${err}`);\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    api\r\n      .setNewAvatar(avatar)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка обновления аватара. ${err}`);\r\n      })\r\n  }\r\n\r\n  function handleAddPlaceSubmit(card) {\r\n    api\r\n      .postNewCard(card)\r\n      .then((res) => {\r\n        const newCard = res;\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка добавления карточки. ${err}`);\r\n      })\r\n  }\r\n\r\n  function handleLogin(email, password) {\r\n    onLogin(email, password)\r\n      .then((res) => {\r\n        if (res.token) {\r\n          setLoggedIn(true);\r\n          setUserMail(email);\r\n          localStorage.setItem(\"jwt\", res.token);\r\n          history.push(\"/\");\r\n        } else if (res.message) {\r\n          console.error(res.message)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        if (err === 400) {\r\n          console.log(\"Не передано одно из полей\");\r\n        } else if (err === 401) {\r\n          console.log(\"Пользователь не зарегестрирован\");\r\n        } else {\r\n          console.log(`Ошибка: ${err}`);\r\n        }\r\n      });\r\n  };\r\n\r\n  function handleRegister(email, password) {\r\n    registration(email, password)\r\n      .then((res) => {\r\n        setIsRegisterPopupOpen(true);\r\n        if (res.data.email === email) {\r\n          setStatusReg(true)\r\n          history.push(\"/signin\");\r\n        } else {\r\n          setStatusReg(false)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setIsRegisterPopupOpen(true);\r\n        if (err === 401) {\r\n          console.log(\"Переданный токен некорректен\");\r\n        } else {\r\n          console.log(`Ошибка: ${err}`);\r\n        }\r\n      });\r\n  };\r\n\r\n  function closeEsc(evt) {\r\n    if ((evt.key === 'Escape') && (isEditAvatarPopupOpen || isEditProfilePopupOpen || isAddPlacePopupOpen || isCardPopupOpen)) {\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  document.addEventListener('keydown', closeEsc);\r\n\r\n  useEffect(() => {\r\n    checkToken();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [history]);\r\n\r\n  useEffect(() => {\r\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\r\n      .then(([values, card]) => {\r\n        setCurrentUser(values);\r\n        setCards(card);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Данные не получены. ${err}`);\r\n      })\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      {/* <div style={{ backgroundColor: \"#000\" }}> */}\r\n      <div className=\"page\">\r\n\r\n        <Header\r\n          userMail={userMail}\r\n          onSignOut={handleLogout}\r\n        />\r\n\r\n        <Switch>\r\n          <ProtectedRoute path={ROUTES_MAP.MAIN} exact\r\n            component={Main}\r\n            loggedIn={loggedIn}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n          />\r\n\r\n          <Route path={ROUTES_MAP.SIGN_UP}>\r\n            <Register\r\n              onRegister={handleRegister}\r\n            />\r\n          </Route>\r\n\r\n          <Route path={ROUTES_MAP.SIGN_IN}>\r\n            <Login\r\n              onLogin={handleLogin}\r\n            />\r\n          </Route>\r\n\r\n          <Route path=\"*\">\r\n            <NotFound />\r\n          </Route>\r\n        </Switch>\r\n\r\n        <Footer />\r\n\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          buttonText='Сохранить'\r\n        />\r\n\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n          buttonText='Сохранить'\r\n        />\r\n\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n          buttonText='Создать'\r\n        />\r\n\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          isOpen={isCardPopupOpen}\r\n          onClose={closeAllPopups}\r\n        />\r\n\r\n        <InfoTooltip\r\n          isOpen={isRegisterPopupOpen}\r\n          onClose={closeAllPopups}\r\n          status={statusReg}\r\n        />\r\n\r\n      </div>\r\n      {/* </div > */}\r\n\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}