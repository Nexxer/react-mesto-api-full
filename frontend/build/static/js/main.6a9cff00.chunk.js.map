{"version":3,"sources":["utils/api.js","utils/apiLogin.js","contexts/CurrentUserContext.js","utils/routesMap.js","image/logo.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","image/SucReg.svg","image/FailReg.svg","components/InfoTooltip.js","components/NotFound.js","components/App.js","serviceWorker.js","index.js"],"names":["api","baseUrl","headers","this","url","fetch","authorization","then","res","_getResponseData","info","method","body","JSON","stringify","name","about","avatar","card","link","cardId","isLiked","ok","json","Promise","reject","Error","status","CurrentUserContext","React","createContext","ROUTES_MAP","Header","userMail","onSignOut","history","useHistory","className","to","src","logo","alt","path","exact","onClick","localStorage","removeItem","push","Card","props","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","likes","some","i","cardLikeButtonClassName","Provider","value","onCardClick","onCardDelete","type","onCardLike","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","map","key","Footer","ImagePopup","isOpen","onClose","PopupWithForm","title","id","noValidate","onSubmit","children","buttonText","EditProfilePopup","useState","setName","description","setDescription","useEffect","evt","preventDefault","onUpdateUser","placeholder","required","minLength","maxLength","onChange","target","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","reset","ref","AddPlacePopup","setLink","Login","email","setEmail","password","setPassword","console","error","onLogin","Register","onRegister","ProtectedRoute","Component","component","loggedIn","InfoTooltip","Success","Failed","NotFound","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isCardPopupOpen","setIsCardPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","isRegisterPopupOpen","setIsRegisterPopupOpen","setUserMail","statusReg","setStatusReg","checkToken","jwt","getItem","Authorization","getJWT","data","catch","closeAllPopups","document","addEventListener","all","getUserInfo","getInitialCards","values","err","log","style","backgroundColor","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","registration","token","setItem","message","setNewAvatar","setUserInfo","postNewCard","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.6a9cff00.chunk.js","sourcesContent":["class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this.url = baseUrl;\r\n    this.headers = headers;\r\n  };\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this.url}/cards`, {\r\n      headers: {\r\n        authorization: this.headers.authorization,\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this.url}/users/me`, {\r\n      headers: {\r\n        authorization: this.headers.authorization,\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  setUserInfo(info) {\r\n    return fetch(`${this.url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: info.name,\r\n        about: info.about,\r\n      }),\r\n    })\r\n      .then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  setNewAvatar(avatar) {\r\n    return fetch(`${this.url}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  postNewCard(card) {\r\n    return fetch(`${this.url}/cards`, {\r\n      method: \"POST\",\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: card.name,\r\n        link: card.link,\r\n      }),\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this.url}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this.headers.authorization,\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    return fetch(`${this.url}/cards/likes/${cardId}`, {\r\n      method: (isLiked ? \"PUT\" : \"DELETE\"),\r\n      headers: {\r\n        authorization: this.headers.authorization,\r\n      },\r\n    }).then((res) => this._getResponseData(res));\r\n  };\r\n\r\n  _getResponseData(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n  };\r\n};\r\n\r\n// export const api = new Api({\r\n//   baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\r\n//   headers: {\r\n//     authorization: '834b1617-1b88-4942-8049-fea5a8e726ef',\r\n//     'Content-Type': 'application/json'\r\n//   }\r\n// });\r\n\r\n\r\nexport const api = new Api({\r\n  baseUrl: 'http://api.nexxer.students.nomoreparties.co/',\r\n});\r\n","const baseUrl = 'https://auth.nomoreparties.co';\r\n\r\nexport const registration = (email, password) => {\r\n  return fetch(`${baseUrl}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(res.status)\r\n    })\r\n};\r\n\r\nexport const onLogin = (email, password) => {\r\n  return fetch(`${baseUrl}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(res.status)\r\n    })\r\n};\r\n\r\nexport const getJWT = (jwt) => {\r\n  return fetch(`${baseUrl}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${jwt}`,\r\n    },\r\n  })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(res.status)\r\n    })\r\n};\r\n","import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext;","export const ROUTES_MAP = {\r\n  MAIN: '/',\r\n  SIGN_UP: '/signup',\r\n  SIGN_IN: '/signin',\r\n  NOT_FOUND: '/404'\r\n};\r\n","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import React from 'react';\r\nimport logo from '../image/logo.svg';\r\nimport { Route, useHistory, Link } from 'react-router-dom';\r\nimport { ROUTES_MAP } from '../utils/routesMap';\r\n\r\nfunction Header({ userMail, onSignOut }) {\r\n  const history = useHistory();\r\n\r\n  const exit = () => {\r\n    onSignOut();\r\n    localStorage.removeItem(\"jwt\");\r\n    history.push(\"/signin\");\r\n  };\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <Link to={ROUTES_MAP.MAIN}>\r\n        <img className=\"header__logo\" src={logo} alt=\"Логотип\" />\r\n      </Link>\r\n\r\n      <Route path={ROUTES_MAP.MAIN} exact>\r\n        <div className=\"header__user\">\r\n          <p className=\"header__user-mail\">{userMail}</p>\r\n          <Link className=\"header__link\" to={ROUTES_MAP.SIGN_IN} onClick={exit}>\r\n            Выйти\r\n        </Link>\r\n        </div>\r\n      </Route>\r\n\r\n      <Route path={ROUTES_MAP.SIGN_UP}>\r\n        <Link className=\"header__link\" to={ROUTES_MAP.SIGN_IN}>\r\n          Войти\r\n        </Link>\r\n      </Route>\r\n\r\n      <Route path={ROUTES_MAP.SIGN_IN}>\r\n        <Link className=\"header__link\" to={ROUTES_MAP.SIGN_UP}>\r\n          Регистрация\r\n        </Link>\r\n      </Route>\r\n\r\n      <Route path={ROUTES_MAP.NOT_FOUND}>\r\n        <Link className=\"header__link\" to={ROUTES_MAP.MAIN}>\r\n          На главную\r\n        </Link>\r\n      </Route>\r\n\r\n    </header >\r\n  )\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport CurrentUserContext from './../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = (`element__delete ${isOwn ? '' : 'element__delete element__delete_hide'}`);\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = (`element__like ${isLiked ? 'elememt__like_active' : ''}`);\r\n\r\n  function handleClick() { props.onCardClick(props.card); }\r\n  function handleLikeClick() { props.onCardLike(props.card); }\r\n  function handleDeleteCard() { props.onCardDelete(props.card); }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <li className=\"element\">\r\n        <img\r\n          className=\"element__image\"\r\n          src={props.card.link}\r\n          alt={props.card.name}\r\n          onClick={handleClick}\r\n        />\r\n        <button\r\n          className={cardDeleteButtonClassName}\r\n          onClick={handleDeleteCard}\r\n        />\r\n        <div className=\"element__info\">\r\n          <h2 className=\"element__title\">{props.card.name}</h2>\r\n          <div className=\"element__likes-container\">\r\n            <button\r\n              type=\"button\"\r\n              className={cardLikeButtonClassName}\r\n              onClick={handleLikeClick}\r\n            />\r\n            <p className=\"element__likes\">{props.card.likes.length}</p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </CurrentUserContext.Provider >\r\n  )\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport CurrentUserContext from './../contexts/CurrentUserContext';\r\n\r\nfunction Main({ onEditAvatar, onEditProfile, onAddPlace, onCardClick, cards, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      {/* Профиль */}\r\n      <section className=\"profile\">\r\n        <div className=\"profile__img\">\r\n          <span className=\"profile__overlay\" onClick={onEditAvatar} />\r\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__title-row\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button className=\"profile__button-edit\" onClick={onEditProfile} />\r\n          </div>\r\n          <p className=\"profile__profession\">{currentUser.about}</p>\r\n        </div>\r\n        <button className=\"profile__button-add\" onClick={onAddPlace} />\r\n      </section>\r\n      {/* Места */}\r\n      <section className=\"elements\">\r\n        <ul className=\"elements__list\">\r\n\r\n          {cards.map((card) => {\r\n            return (\r\n              <Card\r\n                card={card}\r\n                onCardClick={onCardClick}\r\n                key={card._id}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete}\r\n              />\r\n            )\r\n          })}\r\n\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  )\r\n};\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\" >\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer >\r\n  )\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react'\r\n\r\nfunction ImagePopup({card, isOpen, onClose}) {\r\n   return (\r\n    <div className={`popup popup_type_photo ${isOpen && `popup_opened`}`}>\r\n      <figure className=\"popup__content\">\r\n        <img className=\"popup__image\" src={card.link} alt=\"Фото места\" />\r\n        <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n        <button className=\"popup__button-close popup__button-close_for_img\" onClick={onClose} />\r\n      </figure>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default ImagePopup;\r\n","import React from 'react';\r\n\r\n\r\nfunction PopupWithForm(props) {\r\n\r\n  return (\r\n    <div className={`popup popup_type_${props.name} ${props.isOpen && `popup_opened`}`}>\r\n      <div className=\"popup__container\">\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form\r\n          id={`form-${props.name}`}\r\n          className=\"popup__form\"\r\n          noValidate\r\n          onSubmit={props.onSubmit}\r\n        >\r\n          {props.children}\r\n          <button\r\n            type=\"submit\"\r\n            className=\"popup__button-save\"\r\n  >{props.buttonText}</button>\r\n        </form>\r\n        <button\r\n          className=\"popup__button-close\"\r\n          onClick={props.onClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default PopupWithForm;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport CurrentUserContext from './../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser, props.isOpen])\r\n\r\n  function handleNameChange(evt) { setName(evt.target.value); }\r\n  function handlDescriptionChange(evt) { setDescription(evt.target.value); }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={props.buttonText}\r\n    >\r\n      <input\r\n        id=\"profile-name\"\r\n        type=\"text\"\r\n        name=\"name\"\r\n        className=\"popup__input\"\r\n        placeholder=\"Имя\"\r\n        required\r\n        minLength={2}\r\n        maxLength={40}\r\n        value={name || ''}\r\n        onChange={handleNameChange}\r\n      />\r\n\r\n      <span id=\"profile-name-error\" className=\"popup__input_error\" />\r\n\r\n      <input\r\n        id=\"profile-profession\"\r\n        type=\"text\"\r\n        name=\"about\"\r\n        className=\"popup__input popup__input_compl\"\r\n        placeholder=\"О себе\"\r\n        required\r\n        minLength={2}\r\n        maxLength={200}\r\n        value={description || ''}\r\n        onChange={handlDescriptionChange}\r\n      />\r\n\r\n      <span id=\"profile-profession-error\" className=\"popup__input_error\" />\r\n    </PopupWithForm>\r\n  )\r\n};\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    props.onUpdateAvatar(avatarRef.current.value);\r\n    evt.target.reset();\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"avatar\"\r\n      title=\"Обновить аватар\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={props.buttonText}\r\n    >\r\n      <input\r\n        id=\"avatar-link\"\r\n        type=\"url\"\r\n        name=\"avatar\"\r\n        className=\"popup__input\"\r\n        placeholder=\"Ссылка на аватарку\"\r\n        required\r\n        ref={avatarRef}\r\n      />\r\n      <span id=\"avatar-link-error\" className=\"popup__input_error\" />\r\n    </PopupWithForm>\r\n  )\r\n};\r\n\r\nexport default EditAvatarPopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [name, setName] = React.useState(\"\");\r\n  const [link, setLink] = React.useState(\"\");\r\n\r\n  const handleNameChange = (evt) => {\r\n    setName(evt.target.value);\r\n  };\r\n  const handleLinkChange = (evt) => {\r\n    setLink(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    props.onAddPlace({\r\n      name: name,\r\n      link: link,\r\n    });\r\n    setName('');\r\n    setLink('');\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"add-place\"\r\n      title=\"Новое место\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={props.buttonText}\r\n    >\r\n      <input\r\n        id=\"place-name\"\r\n        type=\"text\"\r\n        name=\"photoname\"\r\n        className=\"popup__input\"\r\n        placeholder=\"Название\"\r\n        required\r\n        minLength={2} maxLength={30}\r\n        value={name}\r\n        onChange={handleNameChange}\r\n      />\r\n      <span id=\"place-name-error\" className=\"popup__input_error\" />\r\n      <input\r\n        id=\"place-link\"\r\n        type=\"url\"\r\n        name=\"photolink\"\r\n        className=\"popup__input popup__input_compl\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n        value={link}\r\n        onChange={handleLinkChange}\r\n      />\r\n      <span id=\"place-link-error\" className=\"popup__input_error\" />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  const handleEmailChange = (evt) => {\r\n    setEmail(evt.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (evt) => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    if (!email || !password) {\r\n      console.error(\"Введите данные\");\r\n    }\r\n    props.onLogin(email, password);\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <h2 className=\"login__title\">Вход</h2>\r\n      <form\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"email\"\r\n          required={true}\r\n          placeholder=\"Email\"\r\n          onChange={handleEmailChange}\r\n        />\r\n\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"password\"\r\n          required={true}\r\n          placeholder=\"Пароль\"\r\n          onChange={handlePasswordChange}\r\n        />\r\n\r\n        <button type=\"submit\" className=\"login__submit-button\">\r\n          Войти\r\n      </button>\r\n      </form>\r\n    </div>\r\n\r\n  )\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { ROUTES_MAP } from '../utils/routesMap';\r\n\r\nfunction Register(props) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  const handleEmailChange = (evt) => {\r\n    setEmail(evt.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (evt) => {\r\n    setPassword(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    if (!email || !password) {\r\n      console.error(\"Введите данные\");\r\n    }\r\n    props.onRegister(email, password);\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <h2 className=\"login__title\">Регистрация</h2>\r\n      <form\r\n        className=\"login__form\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input\r\n          className=\"login__input\"\r\n          type=\"email\"\r\n          required={true}\r\n          placeholder=\"Email\"\r\n          onChange={handleEmailChange}\r\n\r\n        />\r\n        <div className=\"login__input-box\">\r\n          <input\r\n            className=\"login__input\"\r\n            type=\"password\"\r\n            required={true}\r\n            placeholder=\"Пароль\"\r\n            onChange={handlePasswordChange}\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"login__submit-button\">\r\n          Зарегистрироваться\r\n      </button>\r\n      </form>\r\n\r\n      <Link className=\"login__link\" to={ROUTES_MAP.SIGN_IN}>\r\n        <p className=\"login__link_text\">Уже зарегистрированы? Войти</p>\r\n      </Link>\r\n\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { ROUTES_MAP } from '../utils/routesMap';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to={ROUTES_MAP.SIGN_IN} />\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","export default __webpack_public_path__ + \"static/media/SucReg.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/FailReg.df8eddf6.svg\";","import React from 'react';\r\nimport Success from '../image/SucReg.svg';\r\nimport Failed from './../image/FailReg.svg';\r\n\r\nfunction InfoTooltip({ isOpen, onClose, status }) {\r\n  return (\r\n    <div className={`popup popup_tooltip ${isOpen ? 'popup_opened' : ''}`}>\r\n      <div className='popup__container'>\r\n        <img\r\n          alt='результат'\r\n          className='popup__picture'\r\n          src={status ? Success : Failed}\r\n        />\r\n        <h2 className='popup__title popup__title_tooltip'>\r\n          {status ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\r\n        </h2>\r\n        <button\r\n          type='button'\r\n          className='popup__button-close'\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InfoTooltip;\r\n","import React from 'react';\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <div className=\"not-found\">\r\n      <h2 className=\"not-found__title\">404</h2>\r\n      <p className=\"not-found__text\">Страница не найдена</p>\r\n      <p className=\"not-found__text\">То что вы ищите, не существует</p>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default NotFound;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\nimport { api } from '../utils/api';\r\nimport { getJWT, onLogin, registration } from \"./../utils/apiLogin\";\r\nimport CurrentUserContext from './../contexts/CurrentUserContext';\r\nimport { ROUTES_MAP } from '../utils/routesMap';\r\nimport Header from './Header'\r\nimport Main from './Main'\r\nimport Footer from './Footer'\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport Login from './Login';\r\nimport Register from \"./Register\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport NotFound from \"./NotFound\";\r\n\r\nfunction App() {\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isCardPopupOpen, setIsCardPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [isRegisterPopupOpen, setIsRegisterPopupOpen] = useState(false);\r\n  const [userMail, setUserMail] = useState('');\r\n  const [statusReg, setStatusReg] = useState(false)\r\n\r\n  const history = useHistory();\r\n\r\n  const checkToken = () => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      getJWT(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setLoggedIn(true);\r\n            setUserMail(res.data.email);\r\n            history.push(\"/\");\r\n          } else {\r\n            setLoggedIn(false);\r\n            history.push(\"/signin\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  function handleLogout() {\r\n    setLoggedIn(false);\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка лайка. ${err}`);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c._id !== card._id);\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка удаления карточки. ${err}`);\r\n      });\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setIsCardPopupOpen(true);\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsRegisterPopupOpen(false);\r\n    setIsCardPopupOpen(false);\r\n  }\r\n\r\n  function handleUpdateUser(info) {\r\n    api\r\n      .setUserInfo(info)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка обновления данных пользователя. ${err}`);\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    api\r\n      .setNewAvatar(avatar)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка обновления аватара. ${err}`);\r\n      })\r\n  }\r\n\r\n  function handleAddPlaceSubmit(card) {\r\n    api\r\n      .postNewCard(card)\r\n      .then((res) => {\r\n        const newCard = res;\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка добавления карточки. ${err}`);\r\n      })\r\n  }\r\n\r\n  function handleLogin(email, password) {\r\n    onLogin(email, password)\r\n      .then((res) => {\r\n        if (res.token) {\r\n          setLoggedIn(true);\r\n          setUserMail(email);\r\n          localStorage.setItem(\"jwt\", res.token);\r\n          history.push(\"/\");\r\n        } else if (res.message) {\r\n          console.error(res.message)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        if (err === 400) {\r\n          console.log(\"Не передано одно из полей\");\r\n        } else if (err === 401) {\r\n          console.log(\"Пользователь с email не найден\");\r\n        } else {\r\n          console.log(`Ошибка: ${err}`);\r\n        }\r\n      });\r\n  };\r\n\r\n  function handleRegister(email, password) {\r\n    registration(email, password)\r\n      .then((res) => {\r\n        setIsRegisterPopupOpen(true);\r\n        if (res.data.email === email) {\r\n          setStatusReg(true)\r\n          history.push(\"/signin\");\r\n        } else {\r\n          setStatusReg(false)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setIsRegisterPopupOpen(true);\r\n        if (err === 401) {\r\n          console.log(\"Переданный токен некорректен\");\r\n        } else {\r\n          console.log(`Ошибка: ${err}`);\r\n        }\r\n      });\r\n  };\r\n\r\n  function closeEsc(evt) {\r\n    if ((evt.key === 'Escape') && (isEditAvatarPopupOpen || isEditProfilePopupOpen || isAddPlacePopupOpen || isCardPopupOpen)) {\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  document.addEventListener('keydown', closeEsc);\r\n\r\n  useEffect(() => {\r\n    checkToken();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [history]);\r\n\r\n  useEffect(() => {\r\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\r\n      .then(([values, card]) => {\r\n        setCurrentUser(values);\r\n        setCards(card);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Данные не получены. ${err}`);\r\n      })\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div style={{ backgroundColor: \"#000\" }}>\r\n        <div className=\"page\">\r\n\r\n          <Header\r\n            userMail={userMail}\r\n            onSignOut={handleLogout}\r\n          />\r\n\r\n          <Switch>\r\n            <ProtectedRoute path={ROUTES_MAP.MAIN} exact\r\n              component={Main}\r\n              loggedIn={loggedIn}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onCardClick={handleCardClick}\r\n              cards={cards}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete}\r\n            />\r\n\r\n            <Route path={ROUTES_MAP.SIGN_UP}>\r\n              <Register\r\n                onRegister={handleRegister}\r\n              />\r\n            </Route>\r\n\r\n            <Route path={ROUTES_MAP.SIGN_IN}>\r\n              <Login\r\n                onLogin={handleLogin}\r\n              />\r\n            </Route>\r\n\r\n            <Route path=\"*\">\r\n              <NotFound />\r\n            </Route>\r\n          </Switch>\r\n\r\n          <Footer />\r\n\r\n          <EditAvatarPopup\r\n            isOpen={isEditAvatarPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateAvatar={handleUpdateAvatar}\r\n            buttonText='Сохранить'\r\n          />\r\n\r\n          <EditProfilePopup\r\n            isOpen={isEditProfilePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateUser={handleUpdateUser}\r\n            buttonText='Сохранить'\r\n          />\r\n\r\n          <AddPlacePopup\r\n            isOpen={isAddPlacePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onAddPlace={handleAddPlaceSubmit}\r\n            buttonText='Создать'\r\n          />\r\n\r\n          <ImagePopup\r\n            card={selectedCard}\r\n            isOpen={isCardPopupOpen}\r\n            onClose={closeAllPopups}\r\n          />\r\n\r\n          <InfoTooltip\r\n            isOpen={isRegisterPopupOpen}\r\n            onClose={closeAllPopups}\r\n            status={statusReg}\r\n          />\r\n\r\n        </div>\r\n      </div >\r\n\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}